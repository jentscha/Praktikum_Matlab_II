% =================================================================================
% Hier auswählen, ob TUD-Design oder nicht
% =================================================================================
\newif\ifTUDdesign
\TUDdesigntrue					% TUD-Design
%\TUDdesignfalse				% Für Rechner ohne installierte TUDdesign-Pakete
% =================================================================================


% =================================================================================
% Hier Daten für studentische Arbeit eingeben
% =================================================================================
\newcommand{\SADATyp}{Praktikumsbericht}
\newcommand{\SADATitel}{Versuch I, Modellbildung und Simulation eines Doppelpendel-Systems}
\newcommand{\SADAStadt}{Darmstadt}
\newcommand{\SADAAutor}{Andreas Jentsch, Ali Kerem Sacakli}
\newcommand{\SADABetreuer}{}
\newcommand{\SADABetreuerII}{}
\newcommand{\SADABetreuerIII}{}
\newcommand{\SADABegin}{}
\newcommand{\SADAAbgabe}{Praktikum Matlab/Simulink II}
\newcommand{\SADASeminar}{}
% =================================================================================


% =================================================================================
% Auswahl des IAT-Fachgebiets (rtm / rtp)
% =================================================================================
\newif\ifrtm
\rtmtrue	% rtm
%\rtmfalse	% rtp
% =================================================================================


% =================================================================================
% Erklärung, dass die Arbeit ohne Hilfe Dritter etc. erstellt wurde
% =================================================================================
\def\SADAVarianteErklaerung{ETIT}		% FB 18, Elektrotechnik
%\def\SADAVarianteErklaerung{MBDA}		% FB 16, Maschinenbau, Diplomarbeit
%\def\SADAVarianteErklaerung{MBSA}		% FB 16, Maschinenbau, Studienarbeit
% =================================================================================


% =================================================================================
% Ausnahmen von der automatischen Silbentrennung
% =================================================================================
\hyphenation{Aktu-ali-sie-rung Screen-shots Pa-rallel-ro-bo-ter Zu-stands-raum-mo-del-le nach-voll-zieh-bar Pro-jekt-se-mi-nar}
% =================================================================================


% =================================================================================
% Hier NIICHTS ändern!
% =================================================================================
\ifTUDdesign
	\documentclass[11pt, twoside, colorback, accentcolor=tud2c, nopartpage, bigchapter, fleqn, ngerman, longdoc]{tudreport}
\else
	\documentclass[11pt, a4paper, twoside, fleqn, ngerman]{scrreprt}
  % Für Entwurf auf Rechnern ohne installierte TUDdesign-Pakete	
	\usepackage{exscale}	% Korrektur math-Zeichen
	\usepackage{eurosym}
\fi
%eps-plot von Matlab in pdf umwandeln, um diese einbinden zu können
\usepackage{epstopdf}
%Paket listings für das Einbinden von Quelltext
\usepackage{listings}
%Stil Matlab_colored definieren
\lstdefinestyle{Matlab_colored}
{
	language = Matlab,
	tabsize = 4,
	framesep = 3mm,
	frame = tb,
	classoffset = 0,
	basicstyle = \ttfamily,
	keywordstyle = \bfseries\color[rgb]{0,0,1},
	commentstyle = \itshape\color[rgb]{0.133,0.545,0.133},
	stringstyle = \color[rgb]{0.672,0.126,0.941},
	extendedchars = true,
	breaklines = true,
	prebreak = \textrightarrow,
	postbreak = \textleftarrow,
	numbers = left,
	numberstyle = \tiny,
	stepnumber = 5	
}


\input{common/includes.tex}				% verwendete Pakete einbinden
\input{common/setup.tex}					% LaTeX-Einstellungen
\input{common/commonmacros.tex}		% oft verwendete Befehle
% =================================================================================


% =================================================================================
% Hier beginnt das eigentliche Dokument
% =================================================================================
\begin{document}
%\input{common/preface.tex} % Titelseite, Aufgabenstellung, Erklärung, Abstract, Inhaltsverzeichnis, etc.
\maketitle




% =================================================================================
% Anhang
% =================================================================================
%\appendix % Damit wird der Anhang begonnen. Die Kapitel werden ab jetzt mit Buchstaben nummeriert



% =================================================================================


%% =================================================================================
%% Abbildungsverzeichnis
%% =================================================================================
%\cleardoublepage
%\phantomsection					% Für Aufnahme ins Inhaltsverzeichnis
%\addcontentsline{toc}{chapter}{\listfigurename}	% In Inhaltsverzeichnis von
%												% Dokument und pdf aufnehmen
%\listoffigures
%% =================================================================================
%
%% =================================================================================
%% Tabellenverzeichnis
%% =================================================================================
%\cleardoublepage
%\phantomsection					% Für Aufnahme ins Inhaltsverzeichnis
%\addcontentsline{toc}{chapter}{\listtablename}	% In Inhaltsverzeichnis von
%												% Dokument und pdf aufnehmen
%\listoftables
%% =================================================================================

% =================================================================================
% Literaturverzeichnis
% =================================================================================
\cleardoublepage
\phantomsection					% Für Aufnahme ins Inhaltsverzeichnis
\addcontentsline{toc}{chapter}{\bibname}	% In Inhaltsverzeichnis von
											% Dokument und pdf aufnehmen
%\bibliographystyle{gerabbrv}	% Verweise nummeriert in eckigen Klammern, alphabetisch sortiert
\bibliographystyle{gerunsrt}	% Verweise nummeriert in eckigen Klammern, nach Erscheinung sortiert

% =================================================================================

%Warum geht title/section nicht?
\addsec{Vorbereitung}
(Text, Bild des Modells)

Code:

\lstinputlisting[style=Matlab_colored,caption={Code des Doppelpendel-Modells}, label={Code_Modell}]{Codes/V1_Modell.m}


\newpage

\addsec{Implementierung des Modells mit verschiedenen Modellierungsmöglichkeiten}

Das im vorherigen Kapitel dargestellte Modell wird mit folgenden drei Modellierungsmöglichkeiten implementiert:
\begin{itemize}
	\item Fcn-Blocks,
	\item MATLAB-Function-Blocks 
	\item einer M-File S-Function
\end{itemize}

In diesem Abschnitt wird für jeweils jede Implementierung das Simulink-Schaltbild mit dem zugehörigen Code zur Simulation vorgestellt.


\paragraph{Fcn-Blocks}

\begin{figure}[htbp]
	\centering
	\includegraphics[scale=0.6]{Bilder/Fcn_Block_Simulink.JPG}
	\caption{Implementierung mit Fcn-Blöcken}
	\label{fig:fcn}
\end{figure}

Dabei lautet die Funktion von \textbf{Fcn}: \newline
$-(6*(4*Rp1*u(2)*l2 - 4*u(1)*l2 + 6*Rp2*u(2)*l1*cos(u(3) - u(4)) - 6*Rp2*u(5)*l1*cos(u(3) - u(4)) + (3*g*l1*l2*m2*sin(u(3) - 2*u(4)))/2 + (3*u(2)^2*l1^2*l2*m2*sin(2*u(3) - 2*u(4)))/2 + 2*u(5)^2*l1*l2^2*m2*sin(u(3) - u(4)) + 2*g*l1*l2*m1*sin(u(3)) + (5*g*l1*l2*m2*sin(u(3)))/2))/(l1^2*l2*(8*m1 + 15*m2 - 9*m2*cos(2*u(3) - 2*u(4))))$ \newline \\
%Fcn2 Block
und für den \textbf{Fcn1} Block lautet die Funktion:\newline
$(6*(4*Rp2*u(2)*l1*m1 - 6*u(1)*l2*m2*cos(u(3) -u(4)) + 12*Rp2*u(2)*l1*m2 - 4*Rp2*u(5)*l1*m1 - 12*Rp2*u(5)*l1*m2 + 6*u(2)^2*l1^2*l2*m2^2*sin(u(3) - u(4)) - 3*g*l1*l2*m2^2*sin(u(4)) + (3*u(5)^2*l1*l2^2*m2^2*sin(2*u(3) - 2*u(4)))/2 + 3*g*l1*l2*m2^2*sin(2*u(3) - u(4)) + 6*Rp1*u(2)*l2*m2*cos(u(3) - u(4)) + 2*u(2)^2*l1^2*l2*m1*m2*sin(u(3) - u(4)) - (g*l1*l2*m1*m2*sin(u(4)))/2 + (3*g*l1*l2*m1*m2*sin(2*u(3) - u(4)))/2))/(l1*l2^2*m2*(8*m1 + 15*m2 - 9*m2*cos(2*u(3) - 2*u(4))))$

\newpage

\paragraph{Matlab-Function-Block}

\begin{figure}
	\centering
	\includegraphics[scale=0.50]{Bilder/Matlab_Function_Block_Simulink.JPG}
	\caption{Implementierung mit einem Matlab-Function-Block}
	\label{fig:matlabfcn}
\end{figure}

Der Code des Matlab-Fcn-Blocks ist wie folgt:

\lstinputlisting[style=Matlab_colored,caption={Code für das Matlab-Function-Block}, label={Code_Matlab_Function}]{Codes/Matlab_Function.m}


\newpage
\paragraph{Level 2 M-File-S-Function}


\begin{figure}
	\centering
	\includegraphics[scale=0.50]{Bilder/S_Function_Block_Simulink.JPG}
	\caption{Implementierung mit einem Matlab-Function-Block}
	\label{fig:Sfcn}
\end{figure}

Die Implementierung des Codes für die S-Function ist wie folgt:

\lstinputlisting[style=Matlab_colored,caption={Code für das Matlab-Function-Block}, label={Code_Matlab_Function}]{Codes/sFunModell.m}

\newpage


\paragraph{Vergleich der Modellierungsmöglichkeiten}

Die in den vorangegangen Abschnitten vorgestellten Modelle werden mit einem Anregungssignal \[ M(t)=0.1sin(t)\]  und der Anfangsbedingung $(\phi_1(t=0)=\phi_2(t=0)=0rad)$ simuliert. Dabei werden die Winkel $\phi_1$ und $\phi_2$ in Abhängigkeit vom Anregungssignal zum einen für eine Simulationsdauer von 10s und 2s dargestellt.

\begin{figure}[!htb]
	\centering
	\includegraphics[scale=1.2]{Bilder/V1_Modell_output_T10.eps}
	\caption{Vergleich der Modellierungsmöglichkeiten bei einer Simulationsdauer von 10s}
	\label{fig:Ergebnis_T10}
\end{figure}


\begin{figure}[!htb]
	\centering
	\includegraphics[scale=1.2]{Bilder/V1_Modell_output_T2.eps}
	\caption{Vergleich der Modellierungsmöglichkeiten bei einer Simulationsdauer von 2s}
	\label{fig:Ergebnis_T2}
\end{figure}

Alle drei behandelten Modellierungsmöglichkeiten sind für die nichtlineare Modellierung geeignet. Bei gleicher Simulationseinstellung sind daher identische Ergebnisse zu erwarten. Wie die Abbildungen zeigen erfüllen die Ergebnisse diese Erwartung.

Der Verlauf der Winkel in Abhängigkeit des Anregungssignals ist plausibel. Für den Winkel $phi_1$ ist ein ähnlicher Verlauf wie das Anregungsmoment, nur mit einer kleiner Verzögerung durch die Trägheitsmomente, zu erwarten, da das Anregungsmoment direkt auf die Drehachse in $phi_1$ wirkt und somit einen ähnlichen Verlauf erzwingt. Der Winkel $phi_2$ ist dagegen frei gelagert und ist nur durch ein Reibmoment  


\end{document}
